<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Settings</title>

    <link rel="stylesheet" href="assets/reset.css">
    <link rel="stylesheet" href="scss/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        .hidden { display: none !important; }
        .disabled { opacity: 0.5; pointer-events: none; }
    </style>
</head>

<body>
    <div class="container">
        <header class="wrapper">
            <nav class="headers-wrapper">
                <a href="index.html" class="headers">Home</a>
                <a href="setting.html" class="headers" id="setting-nav-title">Setting Name</a>
            </nav>
            <div class="btn-wrapper">
                <button class="btn hidden disabled" id="discard-button" disabled>Discard</button>
                <button class="btn hidden disabled" id="save-button" disabled>Save</button>
                <a href="#" class="btn-link" id="add-formula-button-header">Create Formula</a>
            </div>
        </header>

        <div class="input-wrapper">
            <p class="title">Title</p>
            <input type="text" class="input" placeholder="Setting Name" id="setting-title-input" />
        </div>

        <div class="img-wrapper" id="empty-state">
            <img src="assets/chair.png" alt="chair" class="img" />
            <p class="text">Oopsie, seems that you have no formulas yet</p>
            <p class="little-text">Create your first formula!</p>
            <a href="#" class="btn-link" id="add-formula-button-empty">+</a>
        </div>

        <div class="formulas-wrapper">
            <h3 class="h3">Formulas</h3>
            <ul class="list" id="formulas-list"></ul>
        </div>
    </div>

    <!-- Шаблон формули -->
    <template id="formula-template">
        <li class="list-item formula-item">
            <a href="#" class="list-link formula-title edit-formula-link"></a>
            <div class="icons-wrapper">
                <button class="list-btn edit-formula-btn"><img src="assets/edit.svg" alt="edit icon" /></button>
                <button class="list-btn remove-formula-btn"><img src="assets/delete-icon.svg" alt="delete icon" /></button>
            </div>
        </li>
    </template>

    <!-- Початковий стан сторінки -->
    <script type="application/json" id="state">
    {
        "currencies": [
            { "id": 1, "title": "BTC", "value": 0.0001 },
            { "id": 2, "title": "USDT", "value": 1 }
        ],
        "settings": [
            {
                "id": 1,
                "title": "BTC & USDT increase each 2 sec for T-Shirts",
                "status": "active",
                "formulas": [
                    {
                        "id": 1,
                        "title": "BTC in used for T-Shirts",
                        "formula": "X * Y",
                        "frequency": 2000,
                        "currency": "BTC",
                        "targets": {
                            "collectionsIds": [1, 2],
                            "products": [
                                { "id": 1, "variantsIds": [1, 2] }
                            ]
                        }
                    },
                    {
                        "id": 2,
                        "title": "USDT in used for hoodies",
                        "formula": "X + Y",
                        "frequency": 2000,
                        "currency": "USDT",
                        "targets": {
                            "collectionsIds": [3, 4],
                            "products": [
                                { "id": 3, "variants": [1, 2, 3] }
                            ]
                        }
                    }
                ]
            }
        ],
        "collections": [
            { "id": 1, "title": "T-Shirts" },
            { "id": 2, "title": "Hoodies" },
            { "id": 3, "title": "Socks" },
            { "id": 4, "title": "Caps" }
        ],
        "products": [
            {
                "id": 1,
                "title": "Product 1",
                "price": 11,
                "variants": [
                    { "id": 1, "title": "Black", "price": 11 },
                    { "id": 2, "title": "Red", "price": 12 },
                    { "id": 3, "title": "White", "price": 13 }
                ]
            },
            { "id": 2, "title": "Product 2", "price": 15, "variants": [] },
            {
                "id": 3,
                "title": "Product 3",
                "price": 20.99,
                "variants": [
                    { "id": 1, "title": "Black", "price": 29.99 },
                    { "id": 2, "title": "Red", "price": 20.99 },
                    { "id": 3, "title": "White", "price": 29.99 }
                ]
            },
            {
                "id": 4,
                "title": "Product 4",
                "price": 50,
                "variants": [
                    { "id": 1, "title": "XXL", "price": 55.99 },
                    { "id": 2, "title": "XL", "price": 51.99 },
                    { "id": 3, "title": "L", "price": 50 }
                ]
            }
        ]
    }
    </script>

    <!-- Підключення JS -->
    <script src="./scripts/setting-edit.js"></script>
</body>
</html>
